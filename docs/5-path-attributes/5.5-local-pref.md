## 5.5 LOCAL_PREF


---

| **Original Text**                                                                                                                                         | **Explanation with Enhanced Clarification and Examples**                                                                                                                                                                                                                                                                                                                                                     |
|------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **LOCAL_PREF** <br><br> LOCAL_PREF is a well-known attribute that SHALL be included in all UPDATE messages that a given BGP speaker sends to other internal peers. A BGP speaker SHALL calculate the degree of preference for each external route based on the locally-configured policy, and include the degree of preference when advertising a route to its internal peers. The higher degree of preference MUST be preferred. A BGP speaker uses the degree of preference learned via LOCAL_PREF in its Decision Process (see Section 9.1.1). | **LOCAL_PREF Overview**: <br><br> - `LOCAL_PREF` is a **well-known discretionary attribute** used within an Autonomous System (AS) to indicate the preference level for routes. <br> - It is included in all UPDATE messages exchanged between **internal BGP (IBGP)** peers. <br> - A higher `LOCAL_PREF` value means greater preference for the route. <br> - `LOCAL_PREF` influences the **Decision Process** (see Section 9.1.1) to select the best path among multiple available routes. <br><br> **Example**: Router A (AS1) learns about two routes to `192.168.1.0/24` from two external peers: <br> - Route 1 via Router B with `LOCAL_PREF = 200`. <br> - Route 2 via Router C with `LOCAL_PREF = 100`. <br> Router A prefers Route 1 because `LOCAL_PREF = 200` is higher. |
| A BGP speaker MUST NOT include this attribute in UPDATE messages it sends to external peers, except in the case of BGP Confederations [RFC3065]. | **Restriction on LOCAL_PREF with External Peers**: <br><br> - `LOCAL_PREF` is not shared with external peers. It is used **exclusively within an AS** for internal route selection. <br> - **Exception**: BGP Confederations (a type of AS aggregation defined in [RFC3065]) allow `LOCAL_PREF` to be exchanged between member sub-ASes. <br><br> **Example**: Router A in AS1 advertises a route to AS2. The `LOCAL_PREF` is stripped from the UPDATE message because AS2 is external to AS1. However, if AS1 and AS2 are part of the same BGP Confederation, `LOCAL_PREF` may be included. |
| If it is contained in an UPDATE message that is received from an external peer, then this attribute MUST be ignored by the receiving speaker, except in the case of BGP Confederations [RFC3065]. | **Ignoring LOCAL_PREF from External Peers**: <br><br> - If a BGP speaker receives an UPDATE with `LOCAL_PREF` from an **external peer**, it ignores the attribute entirely. <br> - **Exception**: In BGP Confederations, `LOCAL_PREF` is not ignored but processed as defined by configuration policies. <br><br> **Example**: Router B in AS2 sends a route to Router A in AS1 with `LOCAL_PREF = 150`. Router A ignores this value because AS2 is external. However, if AS1 and AS2 belong to the same BGP Confederation, Router A uses the `LOCAL_PREF = 150` in its Decision Process. |

---
